(this.webpackJsonpOSM_ilce=this.webpackJsonpOSM_ilce||[]).push([[0],{108:function(e,t,n){},109:function(e,t,n){},112:function(e,t,n){"use strict";n.r(t);var r=n(11),a=n(39),i=n.n(a),o=n(83),s=n.n(o),c=(n(108),n.p,n(109),n(59)),l=n(60),u=n(55),h=n(61),d=n(71),p=(n(110),n(86)),j=n(81),f=n(70),v=n(115),b=n(116),m=n(5),g=n(87),y=n(51),O=n.n(y),x=n(74),k=n(47),w=n(78),S=n(63);function C(e,t,n){return P.apply(this,arguments)}function P(){return(P=Object(x.a)(O.a.mark((function e(t,n,r){var a,i,o,s,c,l,u,h;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.sinir,i=E(a),o=G(i),s=o[0],o[1],"https://z.overpass-api.de/api/interpreter",e.next=8,N(s,"https://z.overpass-api.de/api/interpreter");case 8:c=e.sent,l=T(c,n),u=l[0],h=l[1],r[0]=u,r[1]=h,r[2]={},r[2].bank=u.filter((function(e){return"bank"===e.getProperties().tags.amenity})),r[2].school=u.filter((function(e){return"school"===e.getProperties().tags.amenity})),r[2].place_of_worship=u.filter((function(e){return"place_of_worship"===e.getProperties().tags.amenity}));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){var t=[e[1],e[0],e[3],e[2]];return JSON.stringify(t[0])+","+JSON.stringify(t[1])+","+JSON.stringify(t[2])+","+JSON.stringify(t[3])}function G(e){return["[out:json] [bbox:"+e+'];(  relation["admin_level"=6]["type"= "boundary"]["boundary"= "administrative"]; map_to_area->.a;  (node(area.a)[amenity];););  out geom; ',"[out:json] [bbox:"+e+'];(  node["amenity"];);  out geom; ']}function N(e,t){return _.apply(this,arguments)}function _(){return(_=Object(x.a)(O.a.mark((function e(t,n){var r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n,{method:"POST",body:t});case 2:return r=e.sent,e.next=5,r.json();case 5:return a=e.sent,e.next=8,a;case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){return Object(m.o)(Object.values(e).reverse(),"EPSG:4326","EPSG:3857")}function F(e,t){var n=e.tags.name,r=e.id,a=function(e){var t=[],n=e.pop(),r=n.geometry.map((function(e){return Object(m.o)(Object.values(e).reverse(),"EPSG:4326","EPSG:3857")}));for(t.push(r);JSON.stringify(t.flat()[0])!==JSON.stringify(t.flat()[t.flat().length-1]);){var a=t.flat()[t.flat().length-1],i=e.findIndex((function(e){return JSON.stringify(J(e.geometry[0]))==JSON.stringify(a)}));-1==i?(i=e.findIndex((function(e){return JSON.stringify(J(e.geometry[e.geometry.length-1]))==JSON.stringify(a)})),r=(n=e.splice(i,1))[0].geometry.map((function(e){return Object(m.o)(Object.values(e).reverse(),"EPSG:4326","EPSG:3857")})),t.push(r.reverse())):(r=(n=e.splice(i,1))[0].geometry.map((function(e){return Object(m.o)(Object.values(e).reverse(),"EPSG:4326","EPSG:3857")})),t.push(r))}return t}(function(e){var t=[];return e.members.forEach((function(e,n,r){"way"===e.type&&t.push(e)})),t}(e)).flat(),i=new k.a([a]),o=t.filter((function(e){return i.intersectsCoordinate(e.getGeometry().getCoordinates())})),s=o.filter((function(e){return"bank"===e.getProperties().tags.amenity})),c=o.filter((function(e){return"school"===e.getProperties().tags.amenity})),l=o.filter((function(e){return"place_of_worship"===e.getProperties().tags.amenity}));return new w.a({geometry:new k.a([a]),name:n,id:r,noktalar:o,bank:s,okullar:c,camiler:l})}function T(e,t){var n=e.elements,r=function(e){return e.filter((function(e){return"relation"===e.type}))}(n),a=function(e){var t=[];return e.forEach((function(e){var n=[e.lon,e.lat],r=Object(m.o)(n,"EPSG:4326","EPSG:3857"),a=e.id,i=e.tags,o=e.tags.name,s=new w.a({geometry:new S.a(r),id:a,tags:i,name:o});t.push(s)})),t}(function(e){return e.filter((function(e){return"node"===e.type}))}(n)),i=[];return r.forEach((function(e){var n=F(e,a);t.addFeature(n),i.push(n)})),[a,i]}var z=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).state={noktalar:r.props.noktalar,poligon:r.props.poligon},r}return Object(l.a)(n,[{key:"poligonToTable",value:function(e){return e.map((function(e,t){var n=e.values_,a=(n.geometry,n.name),i=n.id,o=(n.noktalar,n.bank),s=n.okullar,c=n.camiler;return Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:i}),Object(r.jsx)("td",{children:a}),Object(r.jsx)("td",{children:o.length}),Object(r.jsx)("td",{children:s.length}),Object(r.jsx)("td",{children:c.length})]},i)}))}},{key:"render",value:function(){return Object(r.jsx)("div",{children:Object(r.jsxs)("table",{children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"OSM id"}),Object(r.jsx)("th",{children:"\u0130l\xe7e \u0130sim"}),Object(r.jsx)("th",{children:"Banka sayisi"}),Object(r.jsx)("th",{children:"Okul sayisi"}),Object(r.jsx)("th",{children:"\u0130badethane sayisi"})]})}),Object(r.jsx)("tbody",{children:this.poligonToTable(this.state.poligon)})]})})}}]),n}(a.Component),B=n(88),M=n(21),V=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var r;Object(c.a)(this,n),(r=t.call(this,e)).handleChange=r.handleChange.bind(Object(u.a)(r)),r.closer=r.closer.bind(Object(u.a)(r)),r.overlayContent=r.overlayContent.bind(Object(u.a)(r)),r.veri=[],r.overl=i.a.createRef(),r.source=new j.a({}),r.noktasource=new j.a({}),r.state={center:Object(m.d)([28.97953,41.015137]),zoom:12,data:!1,poligonlar:[],noktalar:[],sinir:[28.8059569,40.9778498,29.091700499999998,41.10772969999999],filtre:"",overlay:!1};var a=new v.a({source:r.source}),o=new v.a({source:r.noktasource});return r.overlay1=void 0,r.olmap=new p.a({target:null,layers:[new b.a({source:new g.a}),a,o],view:new f.a({center:r.state.center,zoom:r.state.zoom})}),r}return Object(l.a)(n,[{key:"updateMap",value:function(){this.olmap.getView().setCenter(this.state.center),this.olmap.getView().setZoom(this.state.zoom)}},{key:"componentDidMount",value:function(){var e=this;this.olmap.setTarget("map"),this.olmap.on("moveend",(function(){var t=e.olmap.getView().getCenter(),n=e.olmap.getView().getZoom(),r=Object(m.p)(e.olmap.getView().calculateExtent(),"EPSG:3857","EPSG:4326");e.setState({sinir:r,center:t,zoom:n})}));document.getElementById("popup");this.overlay1=new B.a({element:this.overl.current,autoPan:!0,autoPanAnimation:{duration:250}}),this.olmap.addOverlay(this.overlay1),this.olmap.on("singleclick",(function(t){var n=e.olmap.forEachFeatureAtPixel(t.pixel,(function(e){if("Point"===e.getGeometry().getType())return e}));if(n){var r=n.getGeometry().getCoordinates(),a=n.getProperties().name;e.setState({overlay:!0,overlaycont:a}),e.overlay1.setPosition(r)}else e.closer();var i=t.coordinate;Object(M.f)(Object(m.l)(i))}))}},{key:"componentDidUpdate",value:function(e,t,n){if(!1===t.data&&!0===this.state.data){document.getElementById("popup");this.overlay1.setElement(this.overl.current)}}},{key:"useract",value:function(){this.setState({data:!0})}},{key:"cleaning",value:function(){console.log("data temizli\u011fi ba\u015fl\u0131yor..."),this.setState({data:!1,poligonlar:[],noktalar:[]}),this.source.clear(),this.noktasource.clear()}},{key:"handleChange",value:function(e){var t=this,n=e.target.value;this.setState({filtre:n}),this.noktasource.clear(),this.veri[2][n].forEach((function(e){t.noktasource.addFeature(e)}))}},{key:"closer",value:function(){this.overlay1.setPosition(void 0),this.setState({overlay:!1})}},{key:"overlayContent",value:function(e){var t=this;if(e.overlay){var n=e.overlaycont;return Object(r.jsxs)("div",{children:[Object(r.jsxs)("p",{children:["Name: ",n," "]}),Object(r.jsx)("a",{href:"#",id:"popup-closer",className:"ol-popup-closer",onClick:function(){return t.closer()}})]})}return null}},{key:"render",value:function(){var e=this;return this.updateMap(),this.state.data?Object(r.jsxs)("div",{id:"main",children:[Object(r.jsx)("div",{id:"map",style:{width:"100%",height:"360px"}}),Object(r.jsx)("button",{onClick:function(t){e.source.clear(),e.noktasource.clear(),C(e.state,e.source,e.veri)},children:"G\xf6r\xfcnen koordinatlardan(Bounding box) veri al\u0131nmas\u0131"}),Object(r.jsx)("button",{onClick:function(t){return e.cleaning()},children:" Verileri sil"}),Object(r.jsx)(z,{noktalar:this.veri[0],poligon:this.veri[1]}),Object(r.jsxs)("form",{children:[Object(r.jsx)("input",{type:"radio",value:"place_of_worship",id:"worship",onChange:this.handleChange,name:"noktalar"}),"            ",Object(r.jsx)("label",{htmlFor:"worship",children:"Cami/Kilisi"}),Object(r.jsx)("input",{type:"radio",value:"school",id:"school",onChange:this.handleChange,name:"noktalar"}),"            ",Object(r.jsx)("label",{htmlFor:"school",children:"Okul"}),Object(r.jsx)("input",{type:"radio",value:"bank",id:"bank",onChange:this.handleChange,name:"noktalar"}),"            ",Object(r.jsx)("label",{htmlFor:"bank",children:"Banka"})]}),Object(r.jsxs)("div",{children:[" ",Object(r.jsx)("div",{id:"popup",className:"ol-popup",ref:this.overl,children:Object(r.jsx)("div",{id:"popup-content",children:Object(r.jsx)(this.overlayContent,{overlay:this.state.overlay,overlaycont:this.state.overlaycont,children:" "})})})," "]})]}):Object(r.jsxs)("div",{id:"main",children:[Object(r.jsx)("div",{id:"map",style:{width:"100%",height:"360px"}}),Object(r.jsx)("button",{onClick:function(t){C(e.state,e.source,e.veri)},children:"G\xf6r\xfcnen koordinatlardan(Bounding box) veri al\u0131nmas\u0131"}),Object(r.jsx)("button",{onClick:function(t){return e.cleaning()},children:"Verileri sil"}),Object(r.jsx)("button",{onClick:function(t){return e.useract()},children:"Tablo Yap"}),Object(r.jsxs)("div",{children:[" ",Object(r.jsx)("div",{id:"popup",className:"ol-popup",ref:this.overl,children:Object(r.jsx)("div",{id:"popup-content",children:Object(r.jsx)(this.overlayContent,{overlay:this.state.overlay,overlaycont:this.state.overlaycont})})})," "]})]})}}]),n}(a.Component);var I=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(V,{})})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,118)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),i(e),o(e)}))};s.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(I,{})}),document.getElementById("root")),A()}},[[112,1,2]]]);
//# sourceMappingURL=main.582a4551.chunk.js.map